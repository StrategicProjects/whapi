[{"path":"https://monitoramento.sepe.pe.gov.br/whapi/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Andre Leite. Author, maintainer. Hugo Vaconcelos. Author. Diogo Bezerra. Author.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Leite , Vaconcelos H, Bezerra D (2025). whapi: R Client 'whapi.cloud'. R package version 0.0.2, https://github.com/StrategicProjects/whapi/.","code":"@Manual{,   title = {whapi: R Client for 'whapi.cloud'},   author = {Andre Leite and Hugo Vaconcelos and Diogo Bezerra},   year = {2025},   note = {R package version 0.0.2},   url = {https://github.com/StrategicProjects/whapi/}, }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"whapi-","dir":"","previous_headings":"","what":"R Client for whapi.cloud","title":"R Client for whapi.cloud","text":"      R wrapper whapi.cloud — lightweight WhatsApp API.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"R Client for whapi.cloud","text":"whapi package provides tidyverse-friendly interface whapi.cloud API, allowing send, receive, manage WhatsApp messages programmatically R. Features include: Sending text, image, document, sticker, location messages; Sending interactive messages (quick replies, mixed actions, lists); Reacting marking messages read; Fetching message details contact profiles; Checking channel health status; Helpers logging webhook flattening. outputs returned tibbles easy integration tidyverse workflows.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Client for whapi.cloud","text":"package development. Install source:","code":"# install.packages(\"devtools\") devtools::install_github(\"StrategicProjects/whapi\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"setup","dir":"","previous_headings":"","what":"Setup","title":"R Client for whapi.cloud","text":"Get API token Whapi.Cloud. Store environment variable: Load package:","code":"Sys.setenv(WHAPI_TOKEN = \"your_api_token_here\") library(whapi)"},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"send-a-text-message","dir":"","previous_headings":"Example Usage","what":"Send a Text Message","title":"R Client for whapi.cloud","text":"","code":"whapi_send_text(\"5581999999999\", \"Hello from R! ✅\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"send-an-image","dir":"","previous_headings":"Example Usage","what":"Send an Image","title":"R Client for whapi.cloud","text":"","code":"whapi_send_image(\"5581999999999\", image = \"card.png\", type = \"file\", caption = \"Card\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"send-a-sticker","dir":"","previous_headings":"Example Usage","what":"Send a Sticker","title":"R Client for whapi.cloud","text":"","code":"whapi_send_sticker(\"5581999999999\", sticker = \"sticker.webp\", type = \"file\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"send-an-interactive-quick-reply","dir":"","previous_headings":"Example Usage","what":"Send an Interactive Quick Reply","title":"R Client for whapi.cloud","text":"","code":"whapi_send_quick_reply(   to = \"5581999999999\",   body_text = \"Do you confirm?\",   buttons = tibble::tribble(~title, \"YES\", \"NO\") )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"react-to-a-message","dir":"","previous_headings":"Example Usage","what":"React to a Message","title":"R Client for whapi.cloud","text":"","code":"whapi_react_to_message(\"PsqXn5SAD5v7HRA-wHqB9tMeGQ\", \"❤️\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"mark-a-message-as-read","dir":"","previous_headings":"Example Usage","what":"Mark a Message as Read","title":"R Client for whapi.cloud","text":"","code":"whapi_mark_message_read(\"PsqXn5SAD5v7HRA-wHqB9tMeGQ\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"get-a-contact-profile","dir":"","previous_headings":"Example Usage","what":"Get a Contact Profile","title":"R Client for whapi.cloud","text":"","code":"whapi_get_contact_profile(\"5581999999999\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"check-channel-health","dir":"","previous_headings":"Example Usage","what":"Check Channel Health","title":"R Client for whapi.cloud","text":"","code":"whapi_check_health()"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"R Client for whapi.cloud","text":"find issues feature requests, feel free create issue pull request GitHub.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"R Client for whapi.cloud","text":"package licensed MIT License. See LICENSE file details.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/hello.html","id":null,"dir":"Reference","previous_headings":"","what":"Hello, World! — hello","title":"Hello, World! — hello","text":"Prints 'Hello, world!'.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/hello.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hello, World! — hello","text":"","code":"hello()"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/hello.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Hello, World! — hello","text":"","code":"hello() #> Error in hello(): could not find function \"hello\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/log_plumber_req.html","id":null,"dir":"Reference","previous_headings":"","what":"Log details of a Plumber request object using the cli package — log_plumber_req","title":"Log details of a Plumber request object using the cli package — log_plumber_req","text":"Prints structured summary req object (Plumber request) console, colored formatted output using cli package. helper useful debugging APIs, inspecting request metadata, logging incoming payloads readable way. function logs: HTTP method, path, query string, host, client IP/port, content type, length. Parsed arguments: argsQuery, argsBody, args. Headers (sensitive values redacted). Cookies (always redacted). Parsed request body (req$body req$postBody).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/log_plumber_req.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Log details of a Plumber request object using the cli package — log_plumber_req","text":"","code":"log_plumber_req(   req,   show_headers = TRUE,   show_cookies = TRUE,   show_body = TRUE,   max_chars = 2000L )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/log_plumber_req.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Log details of a Plumber request object using the cli package — log_plumber_req","text":"req Plumber request object, usually passed automatically inside endpoint. Must contain fields REQUEST_METHOD, PATH_INFO, HTTP_HOST, etc. show_headers Logical. Whether print request headers (default: TRUE). Sensitive values redacted. show_cookies Logical. Whether print cookies (default: TRUE). Values always redacted. show_body Logical. Whether print parsed body raw postBody (default: TRUE). Useful debugging JSON payloads. max_chars Integer. Maximum number characters print large JSON raw bodies. Defaults 2000.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/log_plumber_req.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Log details of a Plumber request object using the cli package — log_plumber_req","text":"Invisibly returns NULL. function called side-effect printing formatted logs console.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/log_plumber_req.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Log details of a Plumber request object using the cli package — log_plumber_req","text":"","code":"if (FALSE) { # \\dontrun{ # Inside a Plumber endpoint #* @post /myendpoint function(req, res) {   log_plumber_req(req) # Prints nicely formatted info about the incoming request   list(success = TRUE) }  # Print only metadata, no headers/body log_plumber_req(req, show_headers = FALSE, show_body = FALSE) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_as_array.html","id":null,"dir":"Reference","previous_headings":"","what":"Ensure ","title":"Ensure ","text":"Utility normalize webhook payloads downstream parsers can safely map_dfr(). Accepts single objects, arrays objects, NULL, always returns list.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_as_array.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ensure ","text":"","code":"whapi_as_array(x, kind = c(\"message\", \"update\"))"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_as_array.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ensure ","text":"x Input object: NULL, list (single message/update), list lists. kind Either \"message\" \"update\". Defines keys look deciding input single object.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_as_array.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ensure ","text":"list message/update objects (possibly length 0).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_as_array.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ensure ","text":"","code":"whapi_as_array(list(id=\"abc\", type=\"text\"), kind=\"message\") #> [[1]] #> [[1]]$id #> [1] \"abc\" #>  #> [[1]]$type #> [1] \"text\" #>  #>  whapi_as_array(NULL, \"update\") # empty list #> list()"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"Converts tibble services (columns id, title, description, section) nested list sections/rows format expected Whapi interactive messages.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"","code":"whapi_build_servicos_sections(tbl, section_order = NULL)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"tbl tibble/data.frame containing least: section   (chr): section name id        (chr): unique identifier (e.g., \"ap1\", \"r2\", \"os3\") title     (chr): display title (can include emoji) descricao (chr): short description service section_order Character vector defining desired order (subset) sections. NULL, sections included alphabetical order.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"list sections, section list : title: section title rows: list rows, list id, title, description","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"section_order = NULL, sections included, ordered alphabetically. section_order provided, acts : filter: sections listed included, order: sections appear order section_order. Within section, rows ordered numeric part id (via readr::parse_number(id)).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_build_servicos_sections.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build Whapi service sections from a tibble (with section column) — whapi_build_servicos_sections","text":"","code":"de_para_servicos <- tibble::tibble(   section   = c(\"Outros Servicos\",\"Renovacoes\",\"Anuencia Previa\"),   id        = c(\"os2\",\"r4\",\"ap1\"),   title     = c(\"Consulta Previa\",                 \"Renovacao de Consulta Previa\",                 \"Desmembramento\"),   descricao = c(\"Initial analysis...\",\"Renewal...\",\"Technical authorization...\") )  # All sections (alphabetical) whapi_build_servicos_sections(de_para_servicos) #> [[1]] #> [[1]]$title #> [1] \"Anuencia Previa\" #>  #> [[1]]$rows #> [[1]]$rows[[1]] #> [[1]]$rows[[1]]$id #> [1] \"ap1\" #>  #> [[1]]$rows[[1]]$title #> [1] \"Desmembramento\" #>  #> [[1]]$rows[[1]]$description #> [1] \"Technical authorization...\" #>  #>  #>  #>  #> [[2]] #> [[2]]$title #> [1] \"Outros Servicos\" #>  #> [[2]]$rows #> [[2]]$rows[[1]] #> [[2]]$rows[[1]]$id #> [1] \"os2\" #>  #> [[2]]$rows[[1]]$title #> [1] \"Consulta Previa\" #>  #> [[2]]$rows[[1]]$description #> [1] \"Initial analysis...\" #>  #>  #>  #>  #> [[3]] #> [[3]]$title #> [1] \"Renovacoes\" #>  #> [[3]]$rows #> [[3]]$rows[[1]] #> [[3]]$rows[[1]]$id #> [1] \"r4\" #>  #> [[3]]$rows[[1]]$title #> [1] \"Renovacao de Consulta Previa\" #>  #> [[3]]$rows[[1]]$description #> [1] \"Renewal...\" #>  #>  #>  #>   # Custom order and filter whapi_build_servicos_sections(   de_para_servicos,   section_order = c(\"Anuencia Previa\",\"Outros Servicos\") ) #> [[1]] #> [[1]]$title #> [1] \"Anuencia Previa\" #>  #> [[1]]$rows #> [[1]]$rows[[1]] #> [[1]]$rows[[1]]$id #> [1] \"ap1\" #>  #> [[1]]$rows[[1]]$title #> [1] \"Desmembramento\" #>  #> [[1]]$rows[[1]]$description #> [1] \"Technical authorization...\" #>  #>  #>  #>  #> [[2]] #> [[2]]$title #> [1] \"Outros Servicos\" #>  #> [[2]]$rows #> [[2]]$rows[[1]] #> [[2]]$rows[[1]]$id #> [1] \"os2\" #>  #> [[2]]$rows[[1]]$title #> [1] \"Consulta Previa\" #>  #> [[2]]$rows[[1]]$description #> [1] \"Initial analysis...\" #>  #>  #>  #>"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_check_health.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Whapi.Cloud channel health and status — whapi_check_health","title":"Check Whapi.Cloud channel health and status — whapi_check_health","text":"Calls GET /health retrieve channel status, versions, uptime, device, IP, user info.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_check_health.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Whapi.Cloud channel health and status — whapi_check_health","text":"","code":"whapi_check_health(   wakeup = TRUE,   channel_type = c(\"web\", \"mobile\"),   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_check_health.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Whapi.Cloud channel health and status — whapi_check_health","text":"wakeup Logical(1). TRUE, adds wakeup=true query param. Default: TRUE. channel_type Character(1). Channel type, either \"web\" \"mobile\". Default: \"web\". token Character(1). Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric(1). Request timeout (s). Default 30. verbose Logical(1). Print CLI logs? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_check_health.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Whapi.Cloud channel health and status — whapi_check_health","text":"tibble key health information: channel_id, uptime, version, core_version, api_version, device_id, ip, status_code, status_text, user_id, user_name, user_pushname, is_business, profile_pic, profile_pic_full, user_status, plus raw response resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_check_health.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Whapi.Cloud channel health and status — whapi_check_health","text":"","code":"if (FALSE) { # \\dontrun{ Sys.setenv(WHAPI_TOKEN = \"your_token_here\") # Default check (wakeup=TRUE, channel_type=\"web\") whapi_check_health()  # Check with channel_type = \"mobile\" whapi_check_health(channel_type = \"mobile\") } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_clip_text.html","id":null,"dir":"Reference","previous_headings":"","what":"Clip long text with ellipsis — whapi_clip_text","title":"Clip long text with ellipsis — whapi_clip_text","text":"Shortens text maximum width (character length). text longer, truncated ellipsis (default \"...\") appended.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_clip_text.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clip long text with ellipsis — whapi_clip_text","text":"","code":"whapi_clip_text(x, width = 420, ellipsis = \"...\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_clip_text.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clip long text with ellipsis — whapi_clip_text","text":"x Character string clip. width Maximum length output including ellipsis. ellipsis Character indicate truncation.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_clip_text.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clip long text with ellipsis — whapi_clip_text","text":"clipped string ellipsis needed.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_clip_text.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clip long text with ellipsis — whapi_clip_text","text":"","code":"whapi_clip_text(\"This is a very long sentence that should be clipped.\", width = 20) #> [1] \"This is a very lo...\" #> \"This is a very long...\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_base.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","title":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","text":"Internal helper converts data.frame/tibble list button definitions normalized list--lists, applying rules: Accepts aliases label / name maps title; Requires non-empty title; Auto-generates id missing using slugification plus uniqueness enforcement (e.g., \"Buy Now\" -> \"buy_now\", duplicates become \"buy_now_2\", \"buy_now_3\", ...). useful building payloads Whapi interactive endpoints (e.g., buttons, mixed actions, etc.).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_base.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","text":"","code":"whapi_coerce_buttons_base(buttons, verbose = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_base.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","text":"buttons data.frame/tibble columns per button (e.g. title, id, etc.) list named lists. Can NULL (returns empty list). verbose Logical (default TRUE). TRUE, prints progress messages via cli (many buttons, many ids auto-generated, etc.).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_base.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","text":"list named lists (one per button), guaranteed least title (non-empty). button id, slugified, unique id created.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_base.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce and normalize button specs for Whapi interactive messages — whapi_coerce_buttons_base","text":"","code":"# From tibble (title only -> ids auto-generated) # tibble::tribble(~title, \"Buy Now\", \"Buy Now\", \"Learn More\") |> #   whapi_coerce_buttons_base()  # From list (mix with/without id) # whapi_coerce_buttons_base(list( #   list(title = \"Website\", url = \"https://example.com\"), #   list(title = \"Website\")  # will get an auto id too # ))"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_mixed.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","title":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","text":"Internal helper prepares mixed action buttons Whapi interactive messages. first normalizes input via whapi_coerce_buttons_base() (accepts data.frame/tibble list, maps aliases title, auto-creates id slug + uniqueness) validates button according declared type: url  -> requires fields: title, id, url call -> requires fields: title, id, phone_number copy -> requires fields: title, id, copy_code Enforces WhatsApp constraints: 1 3 buttons per message.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_mixed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","text":"","code":"whapi_coerce_buttons_mixed(buttons, verbose = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_mixed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","text":"buttons data.frame/tibble (one row per button) list named lists. title required (via alias), id auto-generated missing whapi_coerce_buttons_base(). button must provide valid type among {\"url\",\"call\",\"copy\"}. verbose Logical (default TRUE). TRUE, prints progress messages via cli.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_mixed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","text":"list--lists buttons, validated contain fields required type.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_mixed.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce and validate MIXED buttons (url / call / copy) for Whapi — whapi_coerce_buttons_mixed","text":"","code":"# Example with a tibble: # tibble::tribble( #   ~title,        ~type, ~url, #   \"Website\",     \"url\", \"https://example.com\", #   \"Call Support\",\"call\", NA # ) |> #   whapi_coerce_buttons_base() |> #   whapi_coerce_buttons_mixed()  # Example with a list: # whapi_coerce_buttons_mixed(list( #   list(type=\"url\",  title=\"Website\", url=\"https://example.com\"), #   list(type=\"call\", title=\"Call us\", phone_number=\"5581999999999\"), #   list(type=\"copy\", title=\"Copy OTP\", copy_code=\"123456\") # ))"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_quick.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","title":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","text":"Internal helper prepares quick reply buttons Whapi interactive messages. relies whapi_coerce_buttons_base() normalize input (accept data.frame/list, map aliases label/name -> title, auto-generate id via slug + uniqueness) : Enforces type = \"quick_reply\" buttons; Requires fields title id; Ensures WhatsApp constraint 1 3 buttons.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_quick.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","text":"","code":"whapi_coerce_buttons_quick(buttons, verbose = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_quick.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","text":"buttons data.frame/tibble (one row per button) list named lists. title required (via alias), id auto-created missing whapi_coerce_buttons_base(). verbose Logical (default TRUE). TRUE, prints progress messages via cli.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_quick.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","text":"list--lists buttons, including least title, id, type = \"quick_reply\".","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_coerce_buttons_quick.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce and validate QUICK REPLY buttons for Whapi — whapi_coerce_buttons_quick","text":"","code":"# tibble::tribble(~title, \"YES\", \"NO\") |> #   whapi_coerce_buttons_base() |> #   whapi_coerce_buttons_quick()"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":null,"dir":"Reference","previous_headings":"","what":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"Internal helper constructs standard structure shared Whapi interactive messages (button, list, mixed actions, etc.). automatically normalizes recipient () using whapi_normalize_to(), creates header, body, footer blocks corresponding text provided.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"","code":"whapi_common_blocks(to, body_text, header_text = NULL, footer_text = NULL)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"Character(1). Recipient phone number international format (digits , +), group/channel id. body_text Character(1). Main text interactive message body. header_text Character(1), optional. Optional header text. footer_text Character(1), optional. Optional footer text.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"named list ready merged Whapi interactive message payload, containing elements: , header (provided), body, footer (provided).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"Many Whapi interactive endpoints (e.g., messages/interactive) require basic structure: : target number chat id; header: optional text shown body; body: main message text (required); footer: optional small text shown body. helper ensures consistency avoids repeating boilerplate code building different interactive message payloads.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_common_blocks.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build common message blocks for Whapi interactive messages — whapi_common_blocks","text":"","code":"if (FALSE) { # \\dontrun{ # Minimal body only  whapi_common_blocks(\"5581999999999\", body_text = \"Choose an option below\")  # With header and footer whapi_common_blocks(   to = \"5581999999999\",   body_text   = \"Do you confirm?\",   header_text = \"Booking Confirmation\",   footer_text = \"Reply now\" ) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_date_diff_days.html","id":null,"dir":"Reference","previous_headings":"","what":"Days between two dates — whapi_date_diff_days","title":"Days between two dates — whapi_date_diff_days","text":"Calculates difference days two dates (end - start). Returns NA start date missing.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_date_diff_days.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Days between two dates — whapi_date_diff_days","text":"","code":"whapi_date_diff_days(start, end)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_date_diff_days.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Days between two dates — whapi_date_diff_days","text":"start Start date (Date coercible). end End date (Date coercible).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_date_diff_days.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Days between two dates — whapi_date_diff_days","text":"Integer number days, NA start missing.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_date_diff_days.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Days between two dates — whapi_date_diff_days","text":"","code":"whapi_date_diff_days(Sys.Date() - 10, Sys.Date()) #> [1] 10 #> 10"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract common fields from Whapi API responses — whapi_extract_common_fields","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"Helper function standardize parsing Whapi message responses. Whapi responses typically return JSON object top-level element sent nested message object containing details id, status, timestamp, etc. function consolidates fields flat tibble, making easier work message metadata R.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"","code":"whapi_extract_common_fields(out, fallback_to)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"list (parsed JSON) returned httr2::resp_body_json() Whapi request. fallback_to Character(1). fallback chat id (usually argument originally passed API) used response contain explicit chat_id .","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"tibble one row following columns: id: message id; : recipient chat id (phone group); status: sending status (e.g., \"pending\", \"sent\"); timestamp: numeric epoch timestamp (seconds); timestamp_dt: POSIXct parsed timestamp UTC; type: message type (e.g., \"text\", \"image\", \"location\"); sent: logical/boolean (TRUE sent flag present); resp: full raw response list inspection.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"function safely looks fields multiple possible locations, since Whapi responses always consistent across endpoints: id: prefers $message$id, $id, $message_id; status: $message$status $status; timestamp: $message$timestamp $timestamp; chat_id: $message$chat_id, $message$, fallback_to; type: $message$type $type; sent: top-level $sent (boolean, TRUE successfully sent). timestamp returned raw (numeric, seconds since epoch) parsed POSIXct column (timestamp_dt, UTC).","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_extract_common_fields.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract common fields from Whapi API responses — whapi_extract_common_fields","text":"","code":"# Suppose `resp` is the parsed JSON returned from Whapi:  out <- list(    sent = TRUE,    message = list(      id = \"abc123\",      chat_id = \"558199999999@s.whatsapp.net\",      timestamp = 1756426418,      type = \"location\",      status = \"pending\"    )  )   whapi_extract_common_fields(out, fallback_to = \"558199999999\") #> # A tibble: 1 × 8 #>   id     to            status timestamp timestamp_dt        type  sent  #>   <chr>  <chr>         <chr>      <dbl> <dttm>              <chr> <lgl> #> 1 abc123 558199999999… pendi…    1.76e9 2025-08-29 00:13:38 loca… TRUE  #> # ℹ 1 more variable: resp <list>"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_flatten_webhook.html","id":null,"dir":"Reference","previous_headings":"","what":"Flatten Whapi webhook payload into tidy rows for persistence (robust) — whapi_flatten_webhook","title":"Flatten Whapi webhook payload into tidy rows for persistence (robust) — whapi_flatten_webhook","text":"Flatten Whapi webhook payload tidy rows persistence (robust)","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_flatten_webhook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flatten Whapi webhook payload into tidy rows for persistence (robust) — whapi_flatten_webhook","text":"","code":"whapi_flatten_webhook(payload, verbose = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_flatten_webhook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flatten Whapi webhook payload into tidy rows for persistence (robust) — whapi_flatten_webhook","text":"payload list parsed JSON (e.g. plumber req$body) verbose logical, print logs cli?","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_flatten_webhook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flatten Whapi webhook payload into tidy rows for persistence (robust) — whapi_flatten_webhook","text":"tibble normalized fields","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_fmt_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Safe date formatting — whapi_fmt_date","title":"Safe date formatting — whapi_fmt_date","text":"Formats date safely, returning fallback value (na) input NULL NA.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_fmt_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Safe date formatting — whapi_fmt_date","text":"","code":"whapi_fmt_date(x, fmt = \"%d/%m/%Y\", na = \"-\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_fmt_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Safe date formatting — whapi_fmt_date","text":"x Date coercible Date. fmt Date format passed base::format(). na Fallback string input missing.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_fmt_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Safe date formatting — whapi_fmt_date","text":"formatted date string, na placeholder missing.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_fmt_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Safe date formatting — whapi_fmt_date","text":"","code":"whapi_fmt_date(Sys.Date()) #> [1] \"10/09/2025\" #> \"31/08/2025\" whapi_fmt_date(NA) #> [1] \"-\" #> \"-\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"Fetches profile information one contacts using GET /contacts/{ContactID}/profile returns tidy tibble. version assumes response body contains: name (string, user name), (string, user info section), icon (string, profile preview icon URL), icon_full (string, full avatar URL).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"","code":"whapi_get_contact_profile(   contacts,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   full = TRUE,   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"contacts Character vector. Phones E.164 digits (\"+\") chat IDs. token Bearer token. Defaults env var WHAPI_TOKEN. full Logical. TRUE, add _full=true query param. Default TRUE. timeout Numeric. Request timeout (seconds). Default 30. verbose Logical. Print progress cli? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"tibble one row per contact: contact_id (input id JID queried), name, , icon, icon_full, resp raw response (list).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"contacts element may phone number (free text) JID (e.g., \"1203...@g.us\"). Phone numbers normalized via whapi_normalize_to() (12 digits total); JIDs kept -. full = TRUE, _full=true added querystring request higher-resolution avatars (supported).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_contact_profile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get WhatsApp contact profile(s) via Whapi.Cloud — whapi_get_contact_profile","text":"","code":"if (FALSE) { # \\dontrun{ # Sys.setenv(WHAPI_TOKEN = \"your_token_here\") # Single: # whapi_get_contact_profile(\"5581999999999\")  # Mixed (number + group JID): # whapi_get_contact_profile(c(\"5581999999999\", \"1203630xxxxxx@g.us\")) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","title":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","text":"Get WhatsApp message ID (Whapi.Cloud)","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","text":"","code":"whapi_get_message(   message_id,   resync = FALSE,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","text":"message_id Character(1). message ID fetch. resync Logical(1). Whether resync device. Default FALSE. token Bearer token (default WHAPI_TOKEN env var). timeout Timeout seconds. Default 30. verbose Print CLI progress? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","text":"Tibble fields: id, type, subtype, chat_id, chat_name, , from_name, from_me, source, timestamp, timestamp_dt, device_id, status, raw resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_get_message.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get a WhatsApp message by ID (Whapi.Cloud) — whapi_get_message","text":"","code":"# whapi_get_message(\"PsobWy36679._7w-wKmB9tMeGQ\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_plumber_req.html","id":null,"dir":"Reference","previous_headings":"","what":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","title":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","text":"Prints structured summary req object (Plumber request) console, colored formatted output using cli package. helper useful debugging APIs, inspecting request metadata, logging incoming payloads readable way. function logs: HTTP method, path, query string, host, client IP/port, content type, length. Parsed arguments: argsQuery, argsBody, args. Headers (sensitive values redacted). Cookies (always redacted). Parsed request body (req$body req$postBody).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_plumber_req.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","text":"","code":"whapi_log_plumber_req(   req,   show_headers = TRUE,   show_cookies = TRUE,   show_body = TRUE,   max_chars = 2000L )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_plumber_req.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","text":"req Plumber request object, usually passed automatically inside endpoint. Must contain fields REQUEST_METHOD, PATH_INFO, HTTP_HOST, etc. show_headers Logical. Whether print request headers (default: TRUE). Sensitive values redacted. show_cookies Logical. Whether print cookies (default: TRUE). Values always redacted. show_body Logical. Whether print parsed body raw postBody (default: TRUE). Useful debugging JSON payloads. max_chars Integer. Maximum number characters print large JSON raw bodies. Defaults 2000.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_plumber_req.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","text":"Invisibly returns NULL. function called side-effect printing formatted logs console.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_plumber_req.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Log details of a Plumber request object using the cli package — whapi_log_plumber_req","text":"","code":"if (FALSE) { # \\dontrun{ # Inside a Plumber endpoint #* @post /myendpoint function(req, res) {   whapi_log_plumber_req(req) # Prints nicely formatted info about the incoming request   list(success = TRUE) }  # Print only metadata, no headers/body whapi_log_plumber_req(req, show_headers = FALSE, show_body = FALSE) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_pretty_json.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","title":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","text":"Converts R objects JSON string easier inspection logs. Falls back utils::str() output jsonlite available JSON conversion fails. Long outputs truncated whapi_trunc.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_pretty_json.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","text":"","code":"whapi_log_pretty_json(x, max = 2000L)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_pretty_json.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","text":"x R object (list, data frame, etc.). max Integer. Maximum number characters print (default: 2000).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_pretty_json.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","text":"character string containing JSON (pretty-printed possible).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_log_pretty_json.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert R objects to pretty JSON for logging — whapi_log_pretty_json","text":"","code":"whapi_log_pretty_json(list(a = 1, b = \"test\")) #> [1] \"{\\n  \\\"a\\\": 1,\\n  \\\"b\\\": \\\"test\\\"\\n}\" whapi_log_pretty_json(mtcars[1:2, ], max = 100) #> [1] \"[\\n  {\\n    \\\"mpg\\\": 21,\\n    \\\"cyl\\\": 6,\\n    \\\"disp\\\": 160,\\n    \\\"hp\\\": 110,\\n    \\\"drat\\\": 3.9,\\n    \\\"wt\\\": 2.62,\\n... (truncated)\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":null,"dir":"Reference","previous_headings":"","what":"Make identifiers unique while preserving order — whapi_make_unique","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"Ensures character vector identifiers unique appending numeric suffixes (_2, _3, ...) duplicates found, preserving original order.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"","code":"whapi_make_unique(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"x character vector IDs (possibly duplicates).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"character vector length unique IDs.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"helper particularly useful generating button IDs WhatsApp interactive messages via Whapi. Even whapi_slugifying labels, duplicates may remain (e.g., two buttons titled \"Yes\"). function guarantees uniqueness incrementally appending suffix. Algorithm: Iterates x order; Keeps counter many times ID appeared; First occurrence left unchanged; Subsequent duplicates get suffixed _<n>.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_make_unique.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make identifiers unique while preserving order — whapi_make_unique","text":"","code":"whapi_make_unique(c(\"yes\", \"no\", \"yes\", \"yes\", \"maybe\", \"no\")) #> [1] \"yes\"   \"no\"    \"yes_2\" \"yes_3\" \"maybe\" \"no_2\"  # -> \"yes\", \"no\", \"yes_2\", \"yes_3\", \"maybe\", \"no_2\"  # Combined with whapi_slugify titles <- c(\"Yes!\", \"Yes!\", \"No?\") ids <- whapi_make_unique(whapi_slugify(titles)) tibble::tibble(title = titles, id = ids) #> # A tibble: 3 × 2 #>   title id    #>   <chr> <chr> #> 1 Yes!  yes   #> 2 Yes!  yes_2 #> 3 No?   no"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_mark_message_read.html","id":null,"dir":"Reference","previous_headings":"","what":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","title":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","text":"Marks message read using PUT /messages/{MessageID}. endpoint returns minimalistic ACK body: {\"success\": true | false}.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_mark_message_read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","text":"","code":"whapi_mark_message_read(   message_id,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_mark_message_read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","text":"message_id Character(1). Message ID (WAMID) marked read. token Character(1). Bearer token. Default: Sys.getenv(\"WHAPI_TOKEN\"). timeout Numeric(1). Timeout (s). Default: 30. verbose Logical(1). Show logs via cli? Default: TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_mark_message_read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","text":"tibble following columns: id        - provided message_id; status    - \"read\" success=TRUE, \"error\" otherwise; success   - logical value returned endpoint; resp      - raw response (list).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_mark_message_read.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mark a WhatsApp message as READ (Whapi.Cloud) — whapi_mark_message_read","text":"","code":"if (FALSE) { # \\dontrun{ # Sys.setenv(WHAPI_TOKEN = \"your_token_here\") # whapi_mark_message_read(\"PsqXn5SAD5v7HRA-wHqB9tMeGQ\") } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_match_digits.html","id":null,"dir":"Reference","previous_headings":"","what":"Digit matching helper (with partial threshold) — whapi_match_digits","title":"Digit matching helper (with partial threshold) — whapi_match_digits","text":"Matches digit-needle inside digit-haystack. needle least min_partial digits, partial matching allowed. Otherwise, exact matches considered.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_match_digits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Digit matching helper (with partial threshold) — whapi_match_digits","text":"","code":"whapi_match_digits(haystack, needle, min_partial = 6)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_match_digits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Digit matching helper (with partial threshold) — whapi_match_digits","text":"haystack String potential digits search . needle String digits search . min_partial Minimum number digits required allow partial match.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_match_digits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Digit matching helper (with partial threshold) — whapi_match_digits","text":"Logical (TRUE/FALSE) indicating whether match found.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_match_digits.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Digit matching helper (with partial threshold) — whapi_match_digits","text":"","code":"whapi_match_digits(\"tel: 81998765432\", \"987654\") #> [1] TRUE #> TRUE whapi_match_digits(\"12345\", \"123\", min_partial = 4) #> [1] FALSE #> FALSE"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_normalize_to.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","title":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","text":"Cleans normalizes WhatsApp phone numbers : Skipping normalization entry already contains JID suffix (e.g., \"@s.whatsapp.net\" \"@g.us\"); Otherwise, removing non-digit characters (+, spaces, parentheses, hyphens, etc.); Removing ninth digit (present) right country code (CC) area code (SS), order standardize 12 13 digits.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_normalize_to.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","text":"","code":"whapi_normalize_to(to)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_normalize_to.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","text":"Character. character vector WhatsApp numbers free text format JIDs.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_normalize_to.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","text":"character vector normalized IDs (phones -> digits , JIDs kept -).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_normalize_to.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize WhatsApp contact IDs (phone numbers only) — whapi_normalize_to","text":"function primarily designed Brazilian E.164 numbers (e.g., +55 (81) 9XXXX-YYYY).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_only_digits.html","id":null,"dir":"Reference","previous_headings":"","what":"Keep only digits from a string — whapi_only_digits","title":"Keep only digits from a string — whapi_only_digits","text":"Removes non-digit characters input string. Useful cleaning phone numbers, CNPJs/CPFs, process codes.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_only_digits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Keep only digits from a string — whapi_only_digits","text":"","code":"whapi_only_digits(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_only_digits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Keep only digits from a string — whapi_only_digits","text":"x Character vector string. NULL, empty string used.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_only_digits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Keep only digits from a string — whapi_only_digits","text":"string containing numeric digits.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_only_digits.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Keep only digits from a string — whapi_only_digits","text":"","code":"whapi_only_digits(\"(81) 98765-4321\") #> [1] \"81987654321\" #> \"81987654321\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_body.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse the raw body of a Plumber request — whapi_parse_body","title":"Parse the raw body of a Plumber request — whapi_parse_body","text":"Attempts parse body Plumber req object. Supports req$body (already parsed) req$bodyRaw (raw binary). body looks like JSON ({...} [...]), tries parse jsonlite::fromJSON. Otherwise, returns raw text.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_body.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse the raw body of a Plumber request — whapi_parse_body","text":"","code":"whapi_parse_body(req)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_body.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse the raw body of a Plumber request — whapi_parse_body","text":"req Plumber request object (list-like).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_body.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse the raw body of a Plumber request — whapi_parse_body","text":"list representing parsed body, NULL body found.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_body.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse the raw body of a Plumber request — whapi_parse_body","text":"","code":"# Inside a Plumber endpoint: # parsed <- whapi_parse_body(req) # if (!is.null(parsed)) str(parsed)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_command.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","title":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","text":"Splits incoming text (usually WhatsApp message) command (first token, starting /) associated arguments. Supports collapsing arguments single string preserving character vector.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_command.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","text":"","code":"whapi_parse_command(text, collapse_args = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_command.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","text":"text character string containing full message (e.g. \"/groe ajuda\"). collapse_args Logical, default TRUE. TRUE, arguments collapsed single space-separated string. FALSE, arguments returned character vector tokens.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_command.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","text":"list two elements: command command string (first token), trimmed (e.g. \"/groe\"). arguments arguments, either collapsed single string (default) character vector, depending collapse_args.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_command.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse a text message into command and arguments (Whapi helper) — whapi_parse_command","text":"","code":"whapi_parse_command(\"/groe ajuda\") #> $command #> [1] \"/groe\" #>  #> $arguments #> [1] \"ajuda\" #>  #> $command #> [1] \"/groe\" #> #> $arguments #> [1] \"ajuda\"  whapi_parse_command(\"/groe nome empresa\", collapse_args = FALSE) #> $command #> [1] \"/groe\" #>  #> $arguments #> [1] \"nome\"    \"empresa\" #>  #> $command #> [1] \"/groe\" #> #> $arguments #> [1] \"nome\" \"empresa\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_messages.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Whapi ","title":"Parse Whapi ","text":"Converts webhook field messages (Whapi.Cloud) row-per-message tibble stable schema. extracts common metadata (ids, chat, author, timestamps, source), plain text content, action edits/reactions, interactive replies along quoted context (headers, body, sections/buttons JSON).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_messages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Whapi ","text":"","code":"whapi_parse_messages(   lst,   channel_id = NULL,   event_type = NULL,   event_act = NULL )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_messages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Whapi ","text":"lst list single object representing Whapi webhook messages. Accepts NULL, single message, array messages. channel_id Character. Channel identifier (usually passed whapi_flatten_webhook()). event_type Character. Event type (\"messages\" default). event_act Character. Event action (\"post\" default).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_messages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Whapi ","text":"tibble one row per message. Includes contextual columns (channel_id, event_type, event_action).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_messages.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parse Whapi ","text":"Handles multiple shapes normalizes list messages via helper whapi_as_array(lst, \"message\"). Reply types supported: reply$type == \"list_reply\" -> uses reply$list_reply$id/title/description reply$type == \"buttons_reply\" (\"button_reply\") -> uses reply$buttons_reply$id/title (reply$button_reply) Fallback: reply$id/title/description/body available Context quoted message captured : context_quoted_id, context_quoted_author, context_header, context_body, context_label, context_footer, serialized JSON sections buttons (context_sections_json, context_buttons_json) via whapi_to_pretty_json(). column change set \"reply\" reply messages, \"reactions\" reaction present, \"text\" edit operations. Time fields: timestamp (epoch seconds, numeric) timestamp_dt (POSIXct UTC).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_updates.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Whapi ","title":"Parse Whapi ","text":"Converts webhook field messages_updates (patch events) row-per-update tibble stable schema. Aligns /snapshots, trigger (/caused change), summarizes change type(s) change.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_updates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Whapi ","text":"","code":"whapi_parse_updates(   lst,   channel_id = NULL,   event_type = NULL,   event_act = NULL )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_updates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Whapi ","text":"lst list single object representing Whapi webhook messages_updates. Accepts NULL, single update object, array. channel_id Character. Channel identifier (usually passed whapi_flatten_webhook()). event_type Character. Event type (\"messages_updates\" default). event_act Character. Event action (\"patch\" default).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_updates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Whapi ","text":"tibble one row per update. Includes contextual columns (channel_id, event_type, event_action).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_parse_updates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parse Whapi ","text":"Normalizes input array via whapi_as_array(lst, \"update\"). Safely extracts before_update, after_update, trigger. Uses whapi_scalarize_change() turn changes (vector/list) single string. Preserves schema whapi_parse_messages() outputs can combined dplyr::bind_rows(). Reply/context columns included set NA. Time fields: timestamp (epoch seconds) timestamp_dt (POSIXct UTC).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_perform_request.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","title":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","text":"Generic helper wrapping httr2 call Whapi endpoints. Supports methods: \"GET\", \"POST\", \"PUT\". Handles JSON encoding, retries, errors, CLI logging.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_perform_request.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","text":"","code":"whapi_perform_request(   endpoint,   payload = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE,   method = c(\"POST\", \"GET\", \"PUT\") )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_perform_request.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","text":"endpoint Character(1). Endpoint path (e.g. \"messages/text\"). Full URL constructed \"https://gate.whapi.cloud/{endpoint}\". payload List. Request body (POST/PUT) query (GET). Default: NULL. token Character(1). Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric. Timeout seconds. Default 30. verbose Logical. Print progress via cli? Default TRUE. method Character(1). HTTP method (\"GET\", \"POST\", \"PUT\"). Default \"POST\".","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_perform_request.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","text":"Parsed JSON response list.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_perform_request.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perform an HTTP request to Whapi.Cloud — whapi_perform_request","text":"","code":"# out <- whapi_perform_request(\"messages/text\", list(to=\"5581...\", body=\"Hi\"), method=\"POST\") # out <- whapi_perform_request(\"messages/12345\", list(status=\"read\"), method=\"PUT\")"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_react_to_message.html","id":null,"dir":"Reference","previous_headings":"","what":"React to a WhatsApp message (Whapi.Cloud) — whapi_react_to_message","title":"React to a WhatsApp message (Whapi.Cloud) — whapi_react_to_message","text":"Sends (removes) emoji reaction message via PUT /messages/{MessageID}/reaction. endpoint returns { \"success\": true | false }.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_react_to_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"React to a WhatsApp message (Whapi.Cloud) — whapi_react_to_message","text":"","code":"whapi_react_to_message(   message_id,   emoji,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_react_to_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"React to a WhatsApp message (Whapi.Cloud) — whapi_react_to_message","text":"message_id Character(1). Target message ID (WAMID). emoji Character(1). Emoji react . remove reaction, pass empty string \"\". token Character(1). Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric(1). Request timeout seconds. Default: 30. verbose Logical(1). Print CLI logs? Default: TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_react_to_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"React to a WhatsApp message (Whapi.Cloud) — whapi_react_to_message","text":"tibble columns: id        - message_id reacted emoji     - emoji used (\"\" removed) status    - \"ok\" success, \"error\" otherwise success   - logical flag API resp      - raw response (list)","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_redact.html","id":null,"dir":"Reference","previous_headings":"","what":"Redact sensitive values in headers/cookies — whapi_redact","title":"Redact sensitive values in headers/cookies — whapi_redact","text":"Replaces sensitive header cookie values (e.g., Authorization, Cookie, X-API-Key) literal string \"<redacted>\". Useful logging HTTP requests avoiding credential leaks.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_redact.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Redact sensitive values in headers/cookies — whapi_redact","text":"","code":"whapi_redact(name, value)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_redact.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Redact sensitive values in headers/cookies — whapi_redact","text":"name Header cookie name (character). value Header cookie value (character).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_redact.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Redact sensitive values in headers/cookies — whapi_redact","text":"original value, \"<redacted>\" header considered sensitive.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_redact.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Redact sensitive values in headers/cookies — whapi_redact","text":"","code":"whapi_redact(\"Authorization\", \"Bearer abc123\") #> [1] \"<redacted>\" whapi_redact(\"Content-Type\", \"application/json\") #> [1] \"application/json\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_scalarize_change.html","id":null,"dir":"Reference","previous_headings":"","what":"Collapse a ","title":"Collapse a ","text":"Normalizes webhook changes field (may NULL, vector, nested list) single comma-separated string unique values.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_scalarize_change.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collapse a ","text":"","code":"whapi_scalarize_change(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_scalarize_change.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collapse a ","text":"x character vector, list, NULL Whapi payload.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_scalarize_change.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collapse a ","text":"character scalar (comma-separated) NA_character_ empty.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_scalarize_change.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collapse a ","text":"","code":"whapi_scalarize_change(c(\"text\",\"text\",\"reactions\")) #> [1] \"text,reactions\" # \"text,reactions\"  whapi_scalarize_change(NULL) # NA #> [1] NA"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_document.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","title":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","text":"Sends document using Whapi's POST /messages/document. Supports three input modes via type: \"file\"   : local path -> reads bytes builds data URI (data:<mime>;name=<file>;base64,<...>); \"url\"    : direct http(s) URL; \"base64\" : pre-built data URI (data:application/...;name=...;base64,...).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_document.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","text":"","code":"whapi_send_document(   to,   document,   type = c(\"file\", \"url\", \"base64\"),   caption = NULL,   filename = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_document.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","text":"Character(1). WhatsApp target (E.164 digits , \"+\") chat id. document Character(1). File path (type=\"file\"), URL (\"url\"), data URI (\"base64\"). type One c(\"file\",\"url\",\"base64\"). Default: \"file\". caption Optional caption text. filename Optional filename shown user. omitted: type=\"file\"   -> uses basename(document); type=\"url\"    -> uses URL basename (without query/fragment); type=\"base64\" -> tries name= part inside data URI. token Bearer token (defaults env var WHAPI_TOKEN). timeout Numeric. Request timeout seconds. Default 30. verbose Logical. Print CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_document.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","text":"tibble id, , status, timestamp, timestamp_dt, raw resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_document.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a DOCUMENT via Whapi.Cloud (file, url, or base64) — whapi_send_document","text":"","code":"if (FALSE) { # \\dontrun{  Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  whapi_send_document(\"5581999999999\", \"report.pdf\", type=\"file\", caption=\"Monthly report\")  whapi_send_document(\"5581999999999\", \"https://example.com/contract.docx\", type=\"url\")  b <- openssl::base64_encode(readBin(\"memo.odt\",\"raw\",file.info(\"memo.odt\")$size))  du <- sprintf(\"data:application/vnd.oasis.opendocument.text;name=%s;base64,%s\",   basename(\"memo.odt\"), b)  whapi_send_document(\"5581999999999\", du, type=\"base64\") } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_image.html","id":null,"dir":"Reference","previous_headings":"","what":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","title":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","text":"Sends image using Whapi's POST /messages/image. Supports three input modes type: \"file\": local path -> reads bytes builds data:<mime>;name=<file>;base64,<...> URI \"url\": direct http(s) URL \"base64\": pre-built data URI (data:image/...;base64,...)","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_image.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","text":"","code":"whapi_send_image(   to,   image,   type = c(\"file\", \"url\", \"base64\"),   caption = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_image.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","text":"Character(1). WhatsApp target (E.164 digits , \"+\") chat id. image Character(1). File path (type=\"file\"), URL (type=\"url\"), data URI (type=\"base64\"). type One c(\"file\",\"url\",\"base64\"). Default = \"file\". caption Optional caption text. token Bearer token (defaults env var WHAPI_TOKEN given). timeout Numeric. Timeout seconds. Default 30. verbose Logical. Show CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_image.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","text":"tibble id, , status, timestamp, timestamp_dt, raw resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_image.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send an image via Whapi.Cloud (file, url, or base64) — whapi_send_image","text":"","code":"if (FALSE) { # \\dontrun{ # Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  whapi_send_image(\"5581999999999\", image = \"card.png\", type = \"file\", caption = \"Card\")  whapi_send_image(\"5581999999999\", image = \"https://site.com/img.png\", type = \"url\")  b64 <- openssl::base64_encode(readBin(\"card.png\",\"raw\",file.info(\"card.png\")$size))  data_uri <- sprintf(\"data:image/png;name=%s;base64,%s\", basename(\"card.png\"), b64)  whapi_send_image(\"5581999999999\", image = data_uri, type = \"base64\") } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","title":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","text":"Sends interactive LIST message via Whapi. Sections/rows validated whapi_validate_list_sections(). payload reuses whapi_common_blocks() keep structure consistent across interactive message types.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","text":"","code":"whapi_send_list(   to,   body_text,   list_sections,   list_label = \"Choose...\",   header_text = NULL,   footer_text = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","text":"Character(1). Phone E.164 digits (without \"+\") group id. body_text Character(1). Main body text. list_sections list sections. section named list: list(title = <chr>, rows = list(list(id=<chr>, title=<chr>, description=<chr>?), ...)). list_label Character(1), optional. Button label opens list. Default: \"Choose...\" header_text, footer_text Character(1), optional. Header/footer texts. token Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric. Request timeout seconds. Default 30. verbose Logical. Print CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","text":"tibble id, , status, timestamp, raw response resp.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a WhatsApp interactive LIST message (Whapi.Cloud) — whapi_send_list","text":"","code":"if (FALSE) { # \\dontrun{  Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  sections <- list(    list(      title = \"Burgers\",      rows = list(        list(id=\"b1\", title=\"Plain\",  description=\"No cheese, no sauce\"),        list(id=\"b2\", title=\"Cheese\", description=\"With melted cheese\")      )    ),    list(      title = \"Drinks\",      rows = list(        list(id=\"d1\", title=\"Water\"),        list(id=\"d2\", title=\"Soda\", description=\"Assorted flavors\")      )    )  )  whapi_send_list(    to = \"5581999999999\",    body_text = \"Choose your order:\",    list_sections = sections,    list_label = \"Open menu\",    header_text = \"Our Menu\",    footer_text = \"Thanks!\"  ) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_location.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a geographic location via Whapi.Cloud — whapi_send_location","title":"Send a geographic location via Whapi.Cloud — whapi_send_location","text":"Sends location message using Whapi's POST /messages/location. Supports optional name (short title) address (human-readable).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_location.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a geographic location via Whapi.Cloud — whapi_send_location","text":"","code":"whapi_send_location(   to,   latitude,   longitude,   name = NULL,   address = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_location.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a geographic location via Whapi.Cloud — whapi_send_location","text":"Character(1). WhatsApp target (E.164 digits , \"+\") chat id. latitude Numeric(1). Latitude decimal degrees (range: -90..90). longitude Numeric(1). Longitude decimal degrees (range: -180..180). name Optional character(1). Short title location. address Optional character(1). Human-readable address/description. token Bearer token (defaults env var WHAPI_TOKEN). timeout Numeric. Request timeout (seconds). Default 30. verbose Logical. Print CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_location.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a geographic location via Whapi.Cloud — whapi_send_location","text":"tibble id, , status, timestamp, timestamp_dt, raw resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_location.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a geographic location via Whapi.Cloud — whapi_send_location","text":"","code":"if (FALSE) { # \\dontrun{  Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  whapi_send_location(\"5581999999999\",    latitude = -8.063169, longitude = -34.871139,    name = \"Marco Zero\", address = \"Recife, PE\")  # Group id example  whapi_send_location(\"1203630xxxxxxxx@g.us\", -8.045, -34.91) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_mixed_actions.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","title":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","text":"Sends interactive buttons message mixes url, call, /copy actions. Input buttons normalized/validated whapi_coerce_buttons_mixed() (aliases mapped title, auto id creation, required fields per type).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_mixed_actions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","text":"","code":"whapi_send_mixed_actions(   to,   body_text,   buttons,   header_text = NULL,   footer_text = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_mixed_actions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","text":"Character(1). Phone E.164 digits (without \"+\") group id. body_text Character(1). Main body text. buttons Data frame list. 3 items; must define type {'url','call','copy'} include fields: url:  title, id, url call: title, id, phone_number copy: title, id, copy_code (id auto-generated missing; title required) header_text, footer_text Character (optional). Header/footer texts. token Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric. Request timeout (seconds). Default 30. verbose Logical. Print CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_mixed_actions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","text":"tibble fields id, , status, timestamp, raw response resp.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_mixed_actions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a WhatsApp interactive message mixing URL/CALL/COPY buttons (Whapi.Cloud) — whapi_send_mixed_actions","text":"","code":"if (FALSE) { # \\dontrun{  Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  whapi_send_mixed_actions(    to = \"5581999999999\",    body_text = \"Pick an option:\",    buttons = list(      list(type=\"url\",  title=\"Website\",   url=\"https://example.com\"),      list(type=\"call\", title=\"Call us\",   phone_number=\"5581999999999\"),      list(type=\"copy\", title=\"Copy OTP\",  copy_code=\"123456\")    )  ) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_quick_reply.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","title":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","text":"Sends interactive message type QUICK REPLY via Whapi. button normalized/validated whapi_coerce_buttons_quick() automatically gets unique slugified id missing.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_quick_reply.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","text":"","code":"whapi_send_quick_reply(   to,   body_text,   buttons,   header_text = NULL,   footer_text = NULL,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_quick_reply.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","text":"Character (length 1). Phone E.164 digits (without \"+\") group id. body_text Character. Main body text. buttons Data frame list. 3 items; fields: title, id (id auto-generated missing). header_text, footer_text Character (optional). Header/footer texts. token Bearer token. Defaults env var WHAPI_TOKEN. timeout Numeric, request timeout seconds. Default 30. verbose Logical, print CLI messages. Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_quick_reply.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","text":"tibble fields id, , status, timestamp, raw response resp.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_quick_reply.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a WhatsApp interactive message with QUICK REPLY buttons (Whapi.Cloud) — whapi_send_quick_reply","text":"","code":"if (FALSE) { # \\dontrun{ # Sys.setenv(WHAPI_TOKEN = \"your_token_here\") # whapi_send_quick_reply( #   to = \"5581999999999\", #   body_text = \"Do you confirm?\", #   buttons = tibble::tribble(~title, \"YES\", \"NO\") # ) } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_sticker.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","title":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","text":"Sends WhatsApp sticker via POST /messages/sticker. sticker must WebP format (image/webp).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_sticker.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","text":"","code":"whapi_send_sticker(   to,   sticker,   type = c(\"file\", \"url\", \"base64\"),   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_sticker.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","text":"Character(1). WhatsApp target (E.164 digits , \"+\") chat id. sticker Character(1). type = \"file\": local .webp file path (read encoded Base64 data-URI). type = \"url\": direct http(s) URL .webp file. type = \"base64\": full data-URI string (e.g. \"data:image/webp;name=st.webp;base64,<...>\"). type One c(\"file\",\"url\",\"base64\"). Default = \"file\". token Bearer token (env var WHAPI_TOKEN provided). timeout Numeric. Request timeout (seconds). Default 30. verbose Logical. Print CLI messages? Default TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_sticker.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","text":"tibble id, , status, timestamp, raw response resp.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_sticker.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a STICKER via Whapi.Cloud (file, url, or base64) — whapi_send_sticker","text":"","code":"if (FALSE) { # \\dontrun{ Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  # 1) Local file  whapi_send_sticker(\"558191812121\",    sticker = \"sticker.webp\", type = \"file\")  # 2) Remote URL  whapi_send_sticker(\"558191812121\",    sticker = \"https://example.com/condepe.webp\", type = \"url\")  # 3) Pre-encoded Base64  b64 <- openssl::base64_encode(readBin(\"sticker.webp\",\"raw\",file.info(\"sticker.webp\")$size))  data_uri <- sprintf(\"data:image/webp;name=%s;base64,%s\", basename(\"sticker.webp\"), b64)  whapi_send_sticker(\"558191812121\", sticker = data_uri, type = \"base64\")  } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_text.html","id":null,"dir":"Reference","previous_headings":"","what":"Send a text message via Whapi.Cloud — whapi_send_text","title":"Send a text message via Whapi.Cloud — whapi_send_text","text":"Send text message via Whapi.Cloud","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_text.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send a text message via Whapi.Cloud — whapi_send_text","text":"","code":"whapi_send_text(   to,   body,   token = Sys.getenv(\"WHAPI_TOKEN\", unset = \"\"),   quoted = NULL,   edit = NULL,   typing_time = NULL,   no_link_preview = NULL,   wide_link_preview = NULL,   mentions = NULL,   view_once = NULL,   timeout = 30,   verbose = TRUE )"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_text.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send a text message via Whapi.Cloud — whapi_send_text","text":"Character. WhatsApp number full international format WITHOUT \"+\" (digits , e.g. \"5581999999999\"), existing group/channel id. body Character. Text message (UTF-8). token Character. Whapi Bearer token. default, taken environment variable WHAPI_TOKEN provided. quoted, edit Character (optional). Message IDs quote edit. typing_time Numeric (optional). Seconds simulate typing. no_link_preview Logical (optional). TRUE disable link preview. wide_link_preview Logical (optional). TRUE enable wide preview links. mentions Character vector (optional). Numbers mention (without \"+\"). Remember include @ inside message body well. view_once Logical (optional). TRUE mark message \"view \". timeout Numeric. Request timeout seconds. Default: 30. verbose Logical. Print messages via cli? Default: TRUE.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_text.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Send a text message via Whapi.Cloud — whapi_send_text","text":"tibble essential information (id, , status, timestamp) full API response column resp (list).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_send_text.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send a text message via Whapi.Cloud — whapi_send_text","text":"","code":"if (FALSE) { # \\dontrun{ # Make sure you set WHAPI_TOKEN in your environment or pass via argument  Sys.setenv(WHAPI_TOKEN = \"your_token_here\")  # Simple example:  whapi_send_text(\"5581999999999\", \"Hello! Test message via API\")  # With extra options:  whapi_send_text(    to = \"5581999999999\",    body = \"Hello, @5581999999999 Ola\",    mentions = c(\"5581999999999\"),    typing_time = 2, no_link_preview = TRUE  )  } # }"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":null,"dir":"Reference","previous_headings":"","what":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"Converts free-text labels safe \"slug\" format suitable use message button IDs identifiers Whapi API requests. Ensures IDs contain lowercase letters, digits, underscores, never empty (defaults \"btn\" input blank).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"","code":"whapi_slugify(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"x character vector labels.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"character vector length slugified IDs.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"function particularly useful creating interactive messages (buttons, lists) WhatsApp via Whapi, button requires valid id. whapi_slugifying titles automatically, can safely generate IDs even users provide arbitrary labels spaces, accents, symbols. Transformation steps: Convert lowercase; Replace sequence non-alphanumeric characters _; Trim leading/trailing underscores; Replace empty results \"btn\".","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_slugify.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"whapi_slugify strings for safe IDs (e.g., button IDs in Whapi) — whapi_slugify","text":"","code":"whapi_slugify(c(\"Yes!\", \"Call Us\", \"Sale!\", \"###\")) #> [1] \"yes\"     \"call_us\" \"sale\"    \"btn\"     # -> \"yes\", \"call_us\", \"promocao_rapida\", \"btn\"  # Use case in button creation: titles <- c(\"Buy Now\", \"Learn More\") ids <- whapi_slugify(titles) tibble::tibble(title = titles, id = ids) #> # A tibble: 2 × 2 #>   title      id         #>   <chr>      <chr>      #> 1 Buy Now    buy_now    #> 2 Learn More learn_more"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_ascii_lower.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","title":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","text":"Converts input text lowercase strips diacritics (accents) applying latin-ascii transliteration. Useful normalization matching slug generation.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_ascii_lower.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","text":"","code":"whapi_to_ascii_lower(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_ascii_lower.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","text":"x Character vector string. NULL, empty string used.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_ascii_lower.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","text":"character vector lowercase ASCII without accents.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_ascii_lower.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert text to lowercase ASCII (remove accents) — whapi_to_ascii_lower","text":"","code":"whapi_to_ascii_lower(\"Sao Paulo\") #> [1] \"sao paulo\" #> \"sao paulo\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_num.html","id":null,"dir":"Reference","previous_headings":"","what":"Safely coerce to numeric — whapi_to_num","title":"Safely coerce to numeric — whapi_to_num","text":"Utility coerce value numeric (double), returning NA_real_ input NULL NA.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_num.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Safely coerce to numeric — whapi_to_num","text":"","code":"whapi_to_num(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_num.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Safely coerce to numeric — whapi_to_num","text":"x R object (usually scalar).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_num.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Safely coerce to numeric — whapi_to_num","text":"numeric scalar (double) NA_real_.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_num.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Safely coerce to numeric — whapi_to_num","text":"","code":"whapi_to_num(\"123\") #> [1] 123 whapi_to_num(NULL)   # NA_real_ #> [1] NA"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posix.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce to POSIXct (UTC) safely — whapi_to_posix","title":"Coerce to POSIXct (UTC) safely — whapi_to_posix","text":"Converts numeric timestamp (seconds since Unix epoch) POSIXct UTC. Returns NA input NA.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce to POSIXct (UTC) safely — whapi_to_posix","text":"","code":"whapi_to_posix(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce to POSIXct (UTC) safely — whapi_to_posix","text":"x Numeric scalar (seconds since \"1970-01-01 00:00:00 UTC\").","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce to POSIXct (UTC) safely — whapi_to_posix","text":"POSIXct scalar NA.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce to POSIXct (UTC) safely — whapi_to_posix","text":"","code":"whapi_to_posix(1756500000) #> [1] \"2025-08-29 20:40:00 UTC\" whapi_to_posix(NA)   # NA #> [1] NA"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posixct.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","title":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","text":"Utility function convert Unix timestamp (seconds since 1970-01-01 UTC) POSIXct object. Uses lubridate::as_datetime() readability consistency tidyverse ecosystem.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posixct.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","text":"","code":"whapi_to_posixct(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posixct.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","text":"x numeric character vector representing Unix timestamp (seconds since epoch). Can NULL NA.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posixct.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","text":"POSIXct object (UTC) NA x NULL NA.","code":""},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_posixct.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert numeric timestamp to POSIXct (UTC) — whapi_to_posixct","text":"","code":"# Single timestamp whapi_to_posixct(1756426418) #> [1] \"2025-08-29 00:13:38 UTC\"  # Vector of timestamps (with NA) whapi_to_posixct(c(1756426418, NA)) #> [1] \"2025-08-29 00:13:38 UTC\" NA                         # Character input whapi_to_posixct(\"1756426418\") #> [1] \"2025-08-29 00:13:38 UTC\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_pretty_json.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","title":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","text":"Wrapper around jsonlite::toJSON() serialize lists/data.frames human-readable JSON logging persistence. Returns NA_character_ jsonlite installed conversion fails.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_pretty_json.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","text":"","code":"whapi_to_pretty_json(x)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_pretty_json.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","text":"x R object (list, vector, data.frame).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_pretty_json.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","text":"Character scalar containing pretty-printed JSON, NA_character_.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_to_pretty_json.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert R objects into pretty JSON (character) — whapi_to_pretty_json","text":"","code":"whapi_to_pretty_json(list(a=1, b=2)) #> [1] \"{\\n  \\\"a\\\": 1,\\n  \\\"b\\\": 2\\n}\" whapi_to_pretty_json(mtcars[1:2,1:2]) #> [1] \"[\\n  {\\n    \\\"mpg\\\": 21,\\n    \\\"cyl\\\": 6,\\n    \\\"_row\\\": \\\"Mazda RX4\\\"\\n  },\\n  {\\n    \\\"mpg\\\": 21,\\n    \\\"cyl\\\": 6,\\n    \\\"_row\\\": \\\"Mazda RX4 Wag\\\"\\n  }\\n]\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_trunc.html","id":null,"dir":"Reference","previous_headings":"","what":"Truncate long strings for logging — whapi_trunc","title":"Truncate long strings for logging — whapi_trunc","text":"Helper function shorten long strings printing logs. input string exceeds max characters, truncated suffixed \"... (truncated)\".","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_trunc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Truncate long strings for logging — whapi_trunc","text":"","code":"whapi_trunc(x, max = 2000L)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_trunc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Truncate long strings for logging — whapi_trunc","text":"x character string (coercible character). max Integer. Maximum number characters display (default: 2000).","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_trunc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Truncate long strings for logging — whapi_trunc","text":"character string, possibly truncated.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_trunc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Truncate long strings for logging — whapi_trunc","text":"","code":"whapi_trunc(\"short text\", max = 10) #> [1] \"short text\" whapi_trunc(paste(rep(\"a\", 5000), collapse = \"\"), max = 20) #> [1] \"aaaaaaaaaaaaaaaaaaaa... (truncated)\""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"Internal helper validates structure list_sections used Whapi LIST messages. section must provide non-empty title non-empty rows list. row must provide non-empty id title. description field optional.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"","code":"whapi_validate_list_sections(list_sections, verbose = TRUE, trim = TRUE)"},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"list_sections list sections; section named list title (character) rows (list row objects). verbose Logical (default TRUE). TRUE, prints progress messages via cli. trim Logical (default TRUE). TRUE, trims whitespace section$title, row$title, row$id validating.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"(possibly trimmed) list_sections object, invisibly unchanged shape.","code":""},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"Expected structure:   function performs lightweight validation (optionally) trims whitespace titles ids avoid subtle formatting issues.","code":"list_sections <- list(   list(     title = \"Section title\",     rows = list(       list(id = \"r1\", title = \"Row title\", description = \"Optional\"),       ...     )   ),   ... )"},{"path":[]},{"path":"https://monitoramento.sepe.pe.gov.br/whapi/reference/whapi_validate_list_sections.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate list_sections for Whapi LIST interactive messages — whapi_validate_list_sections","text":"","code":"sections <- list(   list(     title = \"Burgers\",     rows = list(       list(id = \"r1\", title = \"Plain\",  description = \"No cheese, no sauce\"),       list(id = \"r2\", title = \"Cheese\", description = \"With melted cheese\")     )   ) ) whapi_validate_list_sections(sections) #> ℹ Validating 1 section(s) for LIST message... #> ✔ LIST sections validated successfully. #> [[1]] #> [[1]]$title #> [1] \"Burgers\" #>  #> [[1]]$rows #> [[1]]$rows[[1]] #> [[1]]$rows[[1]]$id #> [1] \"r1\" #>  #> [[1]]$rows[[1]]$title #> [1] \"Plain\" #>  #> [[1]]$rows[[1]]$description #> [1] \"No cheese, no sauce\" #>  #>  #> [[1]]$rows[[2]] #> [[1]]$rows[[2]]$id #> [1] \"r2\" #>  #> [[1]]$rows[[2]]$title #> [1] \"Cheese\" #>  #> [[1]]$rows[[2]]$description #> [1] \"With melted cheese\" #>  #>  #>  #>"},{"path":[]},{"path":[]}]
