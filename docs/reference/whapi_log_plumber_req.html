<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Log details of a Plumber request object using the cli package — whapi_log_plumber_req • whapi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Log details of a Plumber request object using the cli package — whapi_log_plumber_req"><meta name="description" content="Prints a structured summary of a req object (Plumber request) to the console,
with colored and formatted output using the cli package.
This helper is useful for debugging APIs, inspecting request metadata,
and logging incoming payloads in a readable way.
The function logs:
HTTP method, path, query string, host, client IP/port, content type, and length.
Parsed arguments: argsQuery, argsBody, args.
Headers (with sensitive values redacted).
Cookies (always redacted).
Parsed request body (req$body or req$postBody).

"><meta property="og:description" content="Prints a structured summary of a req object (Plumber request) to the console,
with colored and formatted output using the cli package.
This helper is useful for debugging APIs, inspecting request metadata,
and logging incoming payloads in a readable way.
The function logs:
HTTP method, path, query string, host, client IP/port, content type, and length.
Parsed arguments: argsQuery, argsBody, args.
Headers (with sensitive values redacted).
Cookies (always redacted).
Parsed request body (req$body or req$postBody).

"><meta property="og:image" content="https://monitoramento.sepe.pe.gov.br/whapi/logo.svg"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">whapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StrategicProjects/whapi" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Log details of a Plumber request object using the cli package</h1>
      <small class="dont-index">Source: <a href="https://github.com/StrategicProjects/whapi/blob/HEAD/R/webhook.R" class="external-link"><code>R/webhook.R</code></a></small>
      <div class="d-none name"><code>whapi_log_plumber_req.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prints a structured summary of a <code>req</code> object (Plumber request) to the console,
with colored and formatted output using the <strong>cli</strong> package.
This helper is useful for debugging APIs, inspecting request metadata,
and logging incoming payloads in a readable way.</p>
<p>The function logs:</p><ul><li><p>HTTP method, path, query string, host, client IP/port, content type, and length.</p></li>
<li><p>Parsed arguments: <code>argsQuery</code>, <code>argsBody</code>, <code>args</code>.</p></li>
<li><p>Headers (with sensitive values redacted).</p></li>
<li><p>Cookies (always redacted).</p></li>
<li><p>Parsed request body (<code>req$body</code> or <code>req$postBody</code>).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">whapi_log_plumber_req</span><span class="op">(</span></span>
<span>  <span class="va">req</span>,</span>
<span>  show_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_cookies <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_body <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_chars <span class="op">=</span> <span class="fl">2000L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-req">req<a class="anchor" aria-label="anchor" href="#arg-req"></a></dt>
<dd><p>A Plumber request object, usually passed automatically inside an endpoint.
Must contain fields such as <code>REQUEST_METHOD</code>, <code>PATH_INFO</code>, <code>HTTP_HOST</code>, etc.</p></dd>


<dt id="arg-show-headers">show_headers<a class="anchor" aria-label="anchor" href="#arg-show-headers"></a></dt>
<dd><p>Logical. Whether to print request headers (default: <code>TRUE</code>).
Sensitive values are redacted.</p></dd>


<dt id="arg-show-cookies">show_cookies<a class="anchor" aria-label="anchor" href="#arg-show-cookies"></a></dt>
<dd><p>Logical. Whether to print cookies (default: <code>TRUE</code>).
Values are always redacted.</p></dd>


<dt id="arg-show-body">show_body<a class="anchor" aria-label="anchor" href="#arg-show-body"></a></dt>
<dd><p>Logical. Whether to print the parsed body or raw <code>postBody</code> (default: <code>TRUE</code>).
Useful for debugging JSON payloads.</p></dd>


<dt id="arg-max-chars">max_chars<a class="anchor" aria-label="anchor" href="#arg-max-chars"></a></dt>
<dd><p>Integer. Maximum number of characters to print for large JSON or raw bodies.
Defaults to <code>2000</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns <code>NULL</code>. The function is called for its side-effect
of printing formatted logs to the console.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_inform()</a></code>, <code><a href="https://cli.r-lib.org/reference/cli_rule.html" class="external-link">cli::cli_rule()</a></code>, <code><a href="https://cli.r-lib.org/reference/cli_verbatim.html" class="external-link">cli::cli_verbatim()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Inside a Plumber endpoint</span></span></span>
<span class="r-in"><span><span class="co">#* @post /myendpoint</span></span></span>
<span class="r-in"><span><span class="kw">function</span><span class="op">(</span><span class="va">req</span>, <span class="va">res</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">whapi_log_plumber_req</span><span class="op">(</span><span class="va">req</span><span class="op">)</span> <span class="co"># Prints nicely formatted info about the incoming request</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>success <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print only metadata, no headers/body</span></span></span>
<span class="r-in"><span><span class="fu">whapi_log_plumber_req</span><span class="op">(</span><span class="va">req</span>, show_headers <span class="op">=</span> <span class="cn">FALSE</span>, show_body <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p><strong>whapi</strong> is part of an ecosystem of R packages for data analysis and computational document processing<br>developed at the <a href="https://monitoramento.sepe.pe.gov.br" class="external-link">Secretaria Executiva de Monitoramento Estratégico</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by André Leite, Diogo Bezerra and Hugo Medeiros</p>
</div>

  </div></footer></body></html>

